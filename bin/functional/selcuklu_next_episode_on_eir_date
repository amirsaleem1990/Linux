#!/usr/bin/python3
# from tabulate import tabulate
# import pandas as pd
# import requests
# from bs4 import BeautifulSoup
# url = "https://next-episode.net/uyanis-buyuk-selcuklu"
# soup = BeautifulSoup(requests.get(url).text, "lxml")
# l = [i.strip() for i in soup.find("div", {"id": "next_episode"}).text.split("\n")[3:] if i][:-1]
# if "Sorry, no info about the next episode" in "\n".join(l):
# 	print("\n" + '\n'.join(l).strip() + "\n")
# 	print("\n\nhttps://www.multipointtv.net/uyanis-buyuk-selcuklu-episode-3-english-urdu-subtitles/\n")
# 	import sys
# 	sys.exit(1)
# d = {}
# for i in l:
#     a = i.split(":")
#     d[a[0]] = a[1]
# df = pd.DataFrame(d, index=["info"]).T
# print(tabulate(df))

from tabulate import tabulate
import pandas as pd
import requests
from bs4 import BeautifulSoup
url = "https://www.tvmaze.com/shows/50131/uyanis-buyuk-selcuklu"
soup = BeautifulSoup(requests.get(url).text, "lxml")
soup = soup.find("section" , {"id" : "next-episode-widget"})
next_episode_number = soup.find("div", {"class" : "header-wrap"}).text.strip().splitlines()[0].strip()
next_eipsode_date = soup.find("div", {"class" : "header-wrap"}).find("h4").text.strip().split(";")[1].strip()
next_eipsode_day = soup.find("time", {"class" : "calendar-time icon left"}).find("em").text
print("\n\n")
print("next episode number:", next_episode_number)
print("next eipsode date:", next_eipsode_date)
print("next eipsode day:", next_eipsode_day)

import calendar
{month: index for index, month in enumerate(calendar.month_abbr) if month}[next_eipsode_date.split()[0]]
next_eipsode_date = next_eipsode_date.replace(next_eipsode_date.split()[0], str({month: index for index, month in enumerate(calendar.month_abbr) if month}[next_eipsode_date.split()[0]]))
next_eipsode_date = next_eipsode_date.replace(",", "")

from datetime import date
f = [int(i) for i in next_eipsode_date.split()]
print(f"Countdown:      { str(date.today() - date(year = f[-1], month = f[0], day = f[1]) ) } days")



print(f"\n\nThis information is collected from:\t\t{url}\n\n")
print("Download link:\t\thttps://www.multipointtv.net/uyanis-buyuk-selcuklu-episode-3-english-urdu-subtitles/\n")
