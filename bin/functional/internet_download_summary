#!/bin/bash

read -p "Enter file extention(eg: mp4, mp4 is default):  " extention
if [[ $extention = "" ]]; then
	extention=mp4 
fi

SUM=`du -sh -BM | sed 's/M..//g'`
before_files=($(ls))
IFS=$'\n'
while :; do
	current=`du -sh -BM | sed 's/M..//g'`
	incremental=$(( $current - $SUM ))
	SUM=$current
	# m=0
	# for i in `ls`; do
	# 	[[ ${before_files[*]} =~ $i ]] && m=yes || m=no
	# 	if [[ $m == "no" ]]; then
	# 		let "m++"
	# 	fi
	# done
	# echo "Time: `date +%H:%M` | IncremenalSize: $incremental | FullSize: $SUM | filesQty.: `find . -name "*.$extention" | wc -l `"
	new_filesQty=$(for i in `ls`; do 
		[[ ${before_files[*]} =~ $i ]] && echo yes || echo no
	done | grep yes | wc -l)
	echo "Time: `date +%H:%M` | IncremenalSize: $incremental | FullSize: $SUM | filesQty.: $new_filesQty"
	sleep 60
done