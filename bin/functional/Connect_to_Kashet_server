#!/bin/bash

answer=$1
if [[ $answer == "" ]]; then
	echo -e "\nEnter
	\t1- Algo -------- 192.168.62.12
	\t2- Production -- 192.168.253.2"
	read answer
fi

if [[ $answer == 1 ]]; then
	answer=192.168.62.12
else
	if [[ $answer == 2 ]]; then
		answer=192.168.253.2
	fi
fi


vpn_status=`naclient status | wc -l`
if [[ $vpn_status > 1 ]] ; then
	naclient logout >/dev/null
fi


echo -e "\n****** Connecting to VPN *******"
/opt/sslvpn-plus/naclient/gui/naclient.sh &>/dev/null

if [[ $? == 0 || $? == 1 ]]; then
	echo -e "Connected to VPN successfully\n\n"
else
	echo -e "Failed to Connect to VPN\n\n"
	exit
fi

echo -e "\n****** Connecting to Kashat-server *******"

if [[ $answer == "192.168.253.2" ]]; then
	ssh 192.168.253.2
else 
	if [[ $answer == "192.168.62.12" ]]; then
		ssh 192.168.62.12
	fi
fi

if [[ $? != 0 ]]; then
	echo -e "Failed to Connect to Kashat-server\n\n"
	exit
fi