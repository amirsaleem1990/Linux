#!/usr/bin/env ipython3
import os
os.chdir("/home/amir/github")
if "git_files.txt" in os.listdir():
	os.system("rm git_files.txt")
aa = True

not_to_commit_repos = ["lfd-projects"]
if not_to_commit_repos:
	print("************************************")
for i in not_to_commit_repos:
	print(f"<{i}> repository excluded from this opereation\n")

repos = os.listdir() # list of all local repositories
repos = [repo for repo in repos if not repo in not_to_commit_repos]

for i in repos:
	if not i.startswith("."):
		os.chdir(i)
		a = os.popen("git status")
		if not ''.join(list(a)) in [
				"On branch master\nYour branch is up to date with 'origin/master'.\n\nnothing to commit, working tree clean\n", "On branch main\nYour branch is up to date with 'origin/main'.\n\nnothing to commit, working tree clean\n"]:	
			print("*"*10, i, "*"*10)
			a = os.popen("git status")
			aa = False
			for z in list(a)[1:]:
				if not z == "\n":
					print(z.replace("\n", ""))
			print("\n")
		else:
			lst = True
		os.chdir("../")

if aa:
	print("Nothing to Add or Push")