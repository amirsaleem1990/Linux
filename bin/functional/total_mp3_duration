#!/bin/bash
echo "
######################################################################
# All mp3 files length.                                              # 
# NOTE: only in this directory (no children directory included)      #
# NOTE: only files ends with <.mp3> extention not else               #
#                                                                    #
# Error (should debug):                                              #
#         line 20: 09: value too great for base (error token is '09')#
######################################################################"

H=0
M=0
S=0
for f in *.mp3; do 
	a=`ffmpeg -i "$f" 2>&1 | grep Duration | cut -d " " -f 4 | sed s/,//  | tr -d "\n"`
	
	float=`echo $a | cut -d: -f3`
	s=${float%.*}
	
	H=$(( `echo $a | cut -d: -f1` + $H ))
	M=$(( `echo $a | cut -d: -f2` + $M ))
	S=$(( $s + $S ))
done
echo "$H:$M:$S"


convertsecs() {
 ((h=${1}/3600))
 ((m=(${1}%3600)/60))
 ((s=${1}%60))
 printf "%02d:%02d:%02d\n" $h $m $s
}

SEC=$S
SEC=$(( $SEC + $M * 60 ))
SEC=$(( $SEC + $H * 3600 ))

echo "HH:MM:SS"
convertsecs $SEC