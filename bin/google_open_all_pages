#!/usr/bin/python3
import requests
import os
from bs4 import BeautifulSoup
import sys

ans = input("1-Copy urls into /home/amir/.GMP\nor \n2-paste urls on cammand line\n(press 1 or 2)\n")
print("\n\n")
if ans == "1":
	try:
		urls = open("/home/amir/.GMP", 'r').read().splitlines()
	except:
		os.popen("subl /home/amir/.GMP")
		input("Enter any key when you saved you file   ")
		urls = open("/home/amir/.GMP", "r").read().splitlines()
else:
	urls = []
	while True:
		input_ = input("Paste you URL please [Enter q for stop]: ")
		if input_ == "q":
			break
		urls.append(input_)


links = []
for url in urls:
	soup = BeautifulSoup(requests.get(url).text, "lxml")
	for i in soup.select("a"):
	    try:
	        l = i['href']
	        if l.startswith("/url?q="):
	            m = l.strip("/url?q=")
	            # links.append("firefox " + m)
	            links.append("/usr/bin/google-chrome-stable " + m)
	    except:
	        pass
L = []
for i in links:
	print(f"url: {i}")
	web = i.replace("https://" , "").replace("http://" , "").replace("/usr/bin/google-chrome-stable ", "").split("/")[0]
	print(f"Actual web: {web}\n\n")
	L.append("/usr/bin/google-chrome-stable " + web if web.startswith("www.") else "www." + web)

links = list(set(L))
for L in links:
	print(L)
	# os.popen(L)

# try:
# 	os.system("rm -f /home/amir/.GMP")
# except:
# 	pass